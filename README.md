# Qtæ—¶é—´æ§ä»¶å¥—ä»¶ (Qt Time Control Suite)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„Qtæ—¶é—´æ§ä»¶å¥—ä»¶ï¼ŒåŒ…å«æ—¶é—´è½´æ§ä»¶ã€æ—¥æœŸé€‰æ‹©å™¨å’Œæ—¶é—´æ’­æ”¾æ§ä»¶ã€‚å…·æœ‰ç²¾ç¾çš„ç°ä»£åŒ–UIè®¾è®¡å’Œä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ï¼Œé€‚ç”¨äºæ—¶é—´ç®¡ç†ã€é¡¹ç›®è§„åˆ’ã€æ•°æ®å¯è§†åŒ–ã€åª’ä½“æ’­æ”¾ç­‰å¤šç§åœºæ™¯ã€‚

![Qt Time Control Suite Demo](screenshot.png)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ• TimeControl - æ—¶é—´è½´æ§ä»¶
- **ç£¨ç ‚ç»ç’ƒèƒŒæ™¯**: æ·±å¤©è“è‰²åŠé€æ˜ç£¨ç ‚è´¨æ„Ÿï¼Œç°ä»£åŒ–è§†è§‰æ•ˆæœ
- **ä¼˜é›…çš„æ—¶é—´æ°”æ³¡**: åŠé€æ˜æ·¡ç»¿è‰²æ°”æ³¡æ˜¾ç¤ºå½“å‰æ—¶é—´
- **æ— é™æ»šåŠ¨**: æ”¯æŒæ— é™åˆ¶æ—¶é—´èŒƒå›´æ»šåŠ¨ï¼ŒæŸ¥çœ‹ä»»æ„æ—¶é—´æ®µ
- **æ™ºèƒ½æ‹–æ‹½**: å¹³æ»‘çš„æ—¶é—´è½´æ»šåŠ¨ï¼Œå¸¦é˜»å°¼æ•ˆæœ
- **åŒå‡»å®šä½**: åŒå‡»æ—¶é—´è½´å¿«é€Ÿå®šä½åˆ°æ•´ç‚¹æ—¶é—´
- **æ»šè½®ç¼©æ”¾**: é¼ æ ‡æ»šè½®ç¼©æ”¾æ—¶é—´è½´æ˜¾ç¤ºç²¾åº¦
- **æ—¶é—´ç‚¹æ ‡è®°**: æ·»åŠ é‡è¦æ—¶é—´èŠ‚ç‚¹ï¼Œæ”¯æŒè‡ªå®šä¹‰é¢œè‰²å’Œæ ‡ç­¾
- **æ—¶é—´æ®µæ˜¾ç¤º**: å¯è§†åŒ–æ—¶é—´æ®µï¼Œé€‚åˆé¡¹ç›®è¿›åº¦å±•ç¤º

### ğŸ“… DateControl - æ—¥æœŸé€‰æ‹©å™¨
- **ç°ä»£åŒ–æ—¥å†ç•Œé¢**: æ¸…æ™°çš„æœˆè§†å›¾å’Œå¹´è§†å›¾åˆ‡æ¢
- **çµæ´»çš„æ—¥æœŸé€‰æ‹©**: æ”¯æŒå•æ—¥æœŸå’Œæ—¥æœŸèŒƒå›´é€‰æ‹©
- **è‡ªå®šä¹‰æ ·å¼**: å¯å®šåˆ¶é¢œè‰²ä¸»é¢˜å’Œå­—ä½“æ ·å¼
- **èŠ‚å‡æ—¥æ ‡è®°**: æ”¯æŒèŠ‚å‡æ—¥å’Œç‰¹æ®Šæ—¥æœŸæ ‡è®°
- **å¿«é€Ÿå¯¼èˆª**: æœˆä»½/å¹´ä»½å¿«é€Ÿè·³è½¬åŠŸèƒ½
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒå¤šç§è¯­è¨€çš„æ—¥æœŸæ˜¾ç¤º

### â¯ï¸ TimePlay - æ—¶é—´æ’­æ”¾æ§ä»¶
- **åª’ä½“æ’­æ”¾æ§åˆ¶**: æ’­æ”¾ã€æš‚åœã€åœæ­¢ã€å¿«è¿›ã€å¿«é€€
- **è¿›åº¦æ¡æ˜¾ç¤º**: å¯è§†åŒ–æ’­æ”¾è¿›åº¦å’Œç¼“å†²çŠ¶æ€
- **æ—¶é—´æ˜¾ç¤º**: å½“å‰æ—¶é—´å’Œæ€»æ—¶é•¿æ˜¾ç¤º
- **éŸ³é‡æ§åˆ¶**: é›†æˆéŸ³é‡è°ƒèŠ‚åŠŸèƒ½
- **æ’­æ”¾é€Ÿåº¦**: æ”¯æŒå˜é€Ÿæ’­æ”¾åŠŸèƒ½
- **å¾ªç¯æ¨¡å¼**: æ”¯æŒå•æ›²å¾ªç¯ã€åˆ—è¡¨å¾ªç¯ç­‰æ¨¡å¼

### ğŸ¨ ç»Ÿä¸€çš„ç°ä»£åŒ–è®¾è®¡
- **å¹³æ»‘åŠ¨ç”»**: ä¸æ»‘çš„æ»šåŠ¨å’Œç¼©æ”¾åŠ¨ç”»æ•ˆæœ
- **å“åº”å¼å¸ƒå±€**: è‡ªé€‚åº”çª—å£å¤§å°ï¼Œå®Œç¾æ˜¾ç¤º
- **é«˜åº¦å¯å®šåˆ¶**: è‡ªå®šä¹‰èƒŒæ™¯ã€åˆ»åº¦ã€æ–‡æœ¬é¢œè‰²
- **é€æ˜çª—å£**: æ”¯æŒé€æ˜èƒŒæ™¯ï¼Œå®Œç¾èå…¥æ¡Œé¢ç¯å¢ƒ

## æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ timecontral.h              # æ—¶é—´è½´æ§ä»¶å¤´æ–‡ä»¶
â”œâ”€â”€ timecontral.cpp            # æ—¶é—´è½´æ§ä»¶å®ç°æ–‡ä»¶
â”œâ”€â”€ timeContral_global.h       # å…¨å±€å®šä¹‰å¤´æ–‡ä»¶
â”œâ”€â”€ timeContral.pro           # åº“é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ demo_window.h             # æ¼”ç¤ºçª—å£å¤´æ–‡ä»¶
â”œâ”€â”€ demo_window.cpp           # æ¼”ç¤ºçª—å£å®ç°æ–‡ä»¶
â”œâ”€â”€ demo_main.cpp             # æ¼”ç¤ºç¨‹åºä¸»æ–‡ä»¶
â”œâ”€â”€ demo.pro                  # æ¼”ç¤ºç¨‹åºé¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ test_timecontral.pro      # æµ‹è¯•é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ test_main.cpp             # æµ‹è¯•ä¸»ç¨‹åº
â”œâ”€â”€ test_timecontral_unit.h   # å•å…ƒæµ‹è¯•å¤´æ–‡ä»¶
â”œâ”€â”€ test_timecontral_unit.cpp # å•å…ƒæµ‹è¯•å®ç°
â””â”€â”€ README.md                 # è¯´æ˜æ–‡æ¡£
```

## ç¼–è¯‘å’Œè¿è¡Œ

### ç¼–è¯‘æ¼”ç¤ºç¨‹åº

1. ç¡®ä¿å·²å®‰è£…Qt 5.12æˆ–æ›´é«˜ç‰ˆæœ¬
2. æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥é¡¹ç›®ç›®å½•
3. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
qmake demo.pro
make  # Linux/Mac
nmake # Windows (ä½¿ç”¨MSVC)
mingw32-make # Windows (ä½¿ç”¨MinGW)
```

4. è¿è¡Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š

```bash
./bin/timecontral_demo  # Linux/Mac
bin\timecontral_demo.exe # Windows
```

### ç¼–è¯‘æµ‹è¯•ç¨‹åº

```bash
qmake test_timecontral.pro
make  # Linux/Mac
nmake # Windows (ä½¿ç”¨MSVC)
./test_timecontral  # è¿è¡Œæµ‹è¯•
```

### ç¼–è¯‘åº“æ–‡ä»¶

```bash
qmake timeContral.pro
make  # Linux/Mac
nmake # Windows (ä½¿ç”¨MSVC)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```cpp
#include "timecontral.h"

// åˆ›å»ºæ—¶é—´è½´æ§ä»¶
TimeContral *timeControl = new TimeContral(parent);

// è®¾ç½®24å°æ—¶æ˜¾ç¤ºèŒƒå›´
QDateTime today = QDateTime::currentDateTime();
QDateTime startOfDay = QDateTime(today.date(), QTime(0, 0, 0));
QDateTime endOfDay = QDateTime(today.date(), QTime(23, 59, 59));

// å¯ç”¨æ— é™æ»šåŠ¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
timeControl->setInfiniteScrollEnabled(true);
timeControl->setVisibleTimeRange(startOfDay, endOfDay);

// æ·»åŠ æ—¶é—´æ ‡è®°
timeControl->addTimePoint(QDateTime::currentDateTime(), "ç°åœ¨", Qt::red);
timeControl->addTimeSpan(
    QDateTime::currentDateTime().addHours(1),
    QDateTime::currentDateTime().addHours(3),
    "ä¼šè®®æ—¶é—´", Qt::blue
);

// è®¾ç½®å½“å‰æ—¶é—´ï¼ˆæ˜¾ç¤ºæ°”æ³¡ï¼‰
timeControl->setCurrentTime(QDateTime::currentDateTime());
```

### é«˜çº§é…ç½®

```cpp
// é™åˆ¶æ»šåŠ¨èŒƒå›´
timeControl->setInfiniteScrollEnabled(false);
timeControl->setTimeRange(startTime, endTime);

// è‡ªå®šä¹‰å¤–è§‚
timeControl->setBackgroundColor(QColor(70, 130, 180, 200));
timeControl->setShowTimeBubble(true);
timeControl->setShowDateOnTimeline(true);

// è®¾ç½®ç¼©æ”¾çº§åˆ«
timeControl->setZoomLevel(1.5);
```

### äº‹ä»¶å¤„ç†

```cpp
// æ—¶é—´é¡¹äº¤äº’
connect(timeControl, &TimeContral::timeItemClicked, [](int index) {
    qDebug() << "ç‚¹å‡»æ—¶é—´é¡¹:" << index;
});

connect(timeControl, &TimeContral::timeItemDoubleClicked, [](int index) {
    qDebug() << "åŒå‡»æ—¶é—´é¡¹:" << index;
});

// æ—¶é—´å˜åŒ–ç›‘å¬
connect(timeControl, &TimeContral::currentTimeChanged, [](const QDateTime &time) {
    qDebug() << "å½“å‰æ—¶é—´:" << time.toString("yyyy-MM-dd hh:mm:ss");
});

// å¯è§èŒƒå›´å˜åŒ–ï¼ˆæ»šåŠ¨æ—¶è§¦å‘ï¼‰
connect(timeControl, &TimeContral::visibleTimeRangeChanged, 
        [](const QDateTime &start, const QDateTime &end) {
    qDebug() << "å¯è§èŒƒå›´:" << start.toString() << "åˆ°" << end.toString();
});
```

## æ¼”ç¤ºç¨‹åºåŠŸèƒ½

æ¼”ç¤ºç¨‹åºæä¾›äº†å®Œæ•´çš„æ§ä»¶åŠŸèƒ½å±•ç¤ºï¼š

### æ§åˆ¶é¢æ¿
- **æ—¶é—´èŒƒå›´è®¾ç½®**: è®¾ç½®æ—¶é—´è½´çš„æœ€å°å’Œæœ€å¤§æ—¶é—´
- **å¯è§èŒƒå›´è®¾ç½®**: è®¾ç½®å½“å‰å¯è§çš„æ—¶é—´èŒƒå›´
- **æ—¶é—´é¡¹ç®¡ç†**: æ·»åŠ ã€åˆ é™¤æ—¶é—´ç‚¹å’Œæ—¶é—´æ®µ
- **ç¼©æ”¾æ§åˆ¶**: æ”¾å¤§ã€ç¼©å°ã€é‡ç½®ç¼©æ”¾çº§åˆ«

### å¤–è§‚è®¾ç½®
- **é¢œè‰²è®¾ç½®**: è‡ªå®šä¹‰èƒŒæ™¯è‰²ã€åˆ»åº¦è‰²ã€æ–‡æœ¬è‰²
- **æ˜¾ç¤ºé€‰é¡¹**: æ§åˆ¶æ—¶é—´æ°”æ³¡å’Œæ—¥æœŸæ˜¾ç¤º
- **æ ¼å¼è®¾ç½®**: è‡ªå®šä¹‰æ—¶é—´æ˜¾ç¤ºæ ¼å¼
- **åˆ»åº¦é«˜åº¦**: è°ƒæ•´æ—¶é—´åˆ»åº¦çš„é«˜åº¦

### æ¼”ç¤ºåŠŸèƒ½
- **ç¤ºä¾‹æ•°æ®**: åŠ è½½é¢„è®¾çš„ç¤ºä¾‹æ—¶é—´é¡¹
- **å®æ—¶æ¼”ç¤º**: è‡ªåŠ¨æ›´æ–°å½“å‰æ—¶é—´å¹¶æ·»åŠ éšæœºäº‹ä»¶
- **æ•°æ®å¯¼å…¥å¯¼å‡º**: ä¿å­˜å’ŒåŠ è½½æ—¶é—´è½´æ•°æ®

### äº‹ä»¶æ—¥å¿—
- æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·æ“ä½œå’Œæ§ä»¶äº‹ä»¶çš„æ—¥å¿—
- å®æ—¶æ›´æ–°çŠ¶æ€ä¿¡æ¯

## ğŸ“– API å‚è€ƒ

### æ—¶é—´èŒƒå›´ç®¡ç†
```cpp
// è®¾ç½®æ€»æ—¶é—´èŒƒå›´ï¼ˆç”¨äºé™åˆ¶æ»šåŠ¨ï¼‰
void setTimeRange(const QDateTime &minTime, const QDateTime &maxTime);
QDateTime minTime() const;
QDateTime maxTime() const;

// è®¾ç½®å¯è§æ—¶é—´èŒƒå›´ï¼ˆå½“å‰æ˜¾ç¤ºçš„æ—¶é—´æ®µï¼‰
void setVisibleTimeRange(const QDateTime &startTime, const QDateTime &endTime);
QDateTime visibleStartTime() const;
QDateTime visibleEndTime() const;

// æ»šåŠ¨æ¨¡å¼æ§åˆ¶
void setInfiniteScrollEnabled(bool enabled);  // å¯ç”¨/ç¦ç”¨æ— é™æ»šåŠ¨
bool isInfiniteScrollEnabled() const;
```

### æ—¶é—´é¡¹ç®¡ç†
```cpp
// æ·»åŠ æ—¶é—´æ ‡è®°
int addTimePoint(const QDateTime &time, const QString &label = QString(), 
                const QColor &color = Qt::blue, const QVariant &userData = QVariant());

int addTimeSpan(const QDateTime &startTime, const QDateTime &endTime, 
               const QString &label = QString(), const QColor &color = Qt::green,
               const QVariant &userData = QVariant());

// ç®¡ç†æ—¶é—´é¡¹
bool removeTimeItem(int index);
void clearTimeItems();
int timeItemCount() const;
TimeItem timeItemAt(int index) const;

// é€‰ä¸­çŠ¶æ€
void setCurrentTimeItem(int index);
int currentTimeItem() const;
```

### å½“å‰æ—¶é—´æ§åˆ¶
```cpp
void setCurrentTime(const QDateTime &time);  // è®¾ç½®å½“å‰æ—¶é—´ï¼ˆæ˜¾ç¤ºæ°”æ³¡ï¼‰
QDateTime currentTime() const;
```

### å¤–è§‚å®šåˆ¶
```cpp
// é¢œè‰²è®¾ç½®
void setBackgroundColor(const QColor &color);
void setScaleColor(const QColor &color);
void setTextColor(const QColor &color);

// æ˜¾ç¤ºé€‰é¡¹
void setShowTimeBubble(bool show);           // æ˜¾ç¤º/éšè—æ—¶é—´æ°”æ³¡
bool isShowTimeBubble() const;
void setShowDateOnTimeline(bool show);       // æ˜¾ç¤º/éšè—æ—¥æœŸ
bool isShowDateOnTimeline() const;

// å…¶ä»–å¤–è§‚
void setScaleHeight(int height);             // åˆ»åº¦é«˜åº¦
void setTimeFormat(const QString &format);   // æ—¶é—´æ ¼å¼
```

### ç¼©æ”¾æ§åˆ¶
```cpp
void zoomIn();                              // æ”¾å¤§
void zoomOut();                             // ç¼©å°
void setZoomLevel(double level);            // è®¾ç½®ç¼©æ”¾çº§åˆ« (0.1-10.0)
double zoomLevel() const;
```

### ä¿¡å·åˆ—è¡¨
```cpp
// äº¤äº’ä¿¡å·
void timeItemClicked(int index);            // æ—¶é—´é¡¹è¢«ç‚¹å‡»
void timeItemDoubleClicked(int index);      // æ—¶é—´é¡¹è¢«åŒå‡»
void currentTimeItemChanged(int index);     // é€‰ä¸­é¡¹æ”¹å˜

// æ—¶é—´å˜åŒ–ä¿¡å·
void currentTimeChanged(const QDateTime &time);                    // å½“å‰æ—¶é—´æ”¹å˜
void timeRangeChanged(const QDateTime &minTime, const QDateTime &maxTime);  // æ—¶é—´èŒƒå›´æ”¹å˜
void visibleTimeRangeChanged(const QDateTime &startTime, const QDateTime &endTime);  // å¯è§èŒƒå›´æ”¹å˜
```

## ğŸ® äº¤äº’è¯´æ˜

### é¼ æ ‡æ“ä½œ
- **æ‹–æ‹½**: æ°´å¹³æ‹–æ‹½æ»šåŠ¨æ—¶é—´è½´ï¼ŒæŸ¥çœ‹ä¸åŒæ—¶é—´æ®µ
- **åŒå‡»**: åŒå‡»æ—¶é—´è½´å®šä½åˆ°å¯¹åº”çš„æ•´ç‚¹æ—¶é—´
- **æ»šè½®**: æ»šåŠ¨ç¼©æ”¾æ—¶é—´è½´æ˜¾ç¤ºç²¾åº¦
- **æ‚¬åœ**: é¼ æ ‡æ‚¬åœåœ¨æ—¶é—´é¡¹ä¸Šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

### é”®ç›˜æ“ä½œ
- æ”¯æŒé€šè¿‡ç¼–ç¨‹æ–¹å¼æ§åˆ¶æ‰€æœ‰åŠŸèƒ½
- å¯é›†æˆè‡ªå®šä¹‰å¿«æ·é”®

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é¡¹ç›®ç®¡ç†
- é¡¹ç›®æ—¶é—´çº¿å±•ç¤º
- é‡Œç¨‹ç¢‘æ ‡è®°
- è¿›åº¦å¯è§†åŒ–

### æ•°æ®åˆ†æ
- æ—¶é—´åºåˆ—æ•°æ®å±•ç¤º
- äº‹ä»¶æ—¶é—´è½´
- è¶‹åŠ¿åˆ†æ

### ç³»ç»Ÿç›‘æ§
- å®æ—¶çŠ¶æ€æ˜¾ç¤º
- å†å²äº‹ä»¶å›æ”¾
- æ€§èƒ½æŒ‡æ ‡æ—¶é—´è½´

### æ—¥ç¨‹ç®¡ç†
- æ—¥ç¨‹å®‰æ’å¯è§†åŒ–
- æ—¶é—´å—ç®¡ç†
- ä¼šè®®æ—¶é—´å±•ç¤º

## ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹

### æ€§èƒ½ä¼˜åŒ–
- é«˜æ•ˆçš„ç»˜åˆ¶ç®—æ³•ï¼Œæ”¯æŒå¤§é‡æ—¶é—´é¡¹
- æ™ºèƒ½çš„å¯è§åŒºåŸŸè®¡ç®—ï¼Œåªç»˜åˆ¶å¿…è¦å†…å®¹
- å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœï¼Œ60fpsæµç•…ä½“éªŒ

### å…¼å®¹æ€§
- æ”¯æŒQt 5.12åŠä»¥ä¸Šç‰ˆæœ¬
- è·¨å¹³å°æ”¯æŒï¼šWindowsã€Linuxã€macOS
- æ”¯æŒé«˜DPIæ˜¾ç¤ºå±

### æ‰©å±•æ€§
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- ä¸°å¯Œçš„ä¿¡å·ç³»ç»Ÿï¼Œä¾¿äºé›†æˆ
- æ”¯æŒè‡ªå®šä¹‰æ ·å¼å’Œä¸»é¢˜

## ğŸ› å·²çŸ¥é—®é¢˜

- åœ¨æŸäº›Linuxå‘è¡Œç‰ˆä¸Šå¯èƒ½éœ€è¦é¢å¤–çš„å­—ä½“é…ç½®
- é«˜DPIå±å¹•ä¸Šçš„æ–‡æœ¬æ¸²æŸ“å¯èƒ½éœ€è¦è°ƒæ•´

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-23)
- âœ¨ å…¨æ–°çš„ç£¨ç ‚ç»ç’ƒUIè®¾è®¡
- ğŸš€ æ— é™æ»šåŠ¨åŠŸèƒ½
- ğŸ¯ åŒå‡»å®šä½åˆ°æ•´ç‚¹
- ğŸ¨ åŠé€æ˜æ°”æ³¡æ•ˆæœ
- ğŸ“± é€æ˜çª—å£æ”¯æŒ
- âš¡ å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
- ğŸ”§ å®Œæ•´çš„APIæ¥å£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶
- åˆ›å»º Discussion

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªæ˜Ÿæ ‡æ”¯æŒä¸€ä¸‹ï¼